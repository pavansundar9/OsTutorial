<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Banker's Algorithm Simulator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=PT+Serif:ital@1&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Sofia&effect=neon|outline|emboss|shadow-multiple">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="style.css"/>
    <script src="scriptBanker.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.2/html2canvas.min.js"></script>
    
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"></script>
    <script type="text/javascript" src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>

  </head>
  <body>
    <div class="main">
      <div class="navbar">
        <div class="nav-container">
            <div class="icon">
                <h2 class="font-effect-outline" style="color: coral;"><a href="index.html">MuRP</a></h2>
            </div>
            <div class="menu">
                <ul>
                    <li><a href="index.html">HOME</a></li>
                    <li><a href="#">ABOUT</a></li>
                    <li><a href="#">SERVICE</a></li>
                    <li><a href="#">DESIGN</a></li>
                    <li><a href="#">CONTACT</a></li>
                </ul>
            </div>
            <div class="search">
                <input class="srch" type="search" name="" placeholder="Type to search">
                <a href="#"><input type="button" value="Search"></a>
            </div>                
        </div>
    </div>
  </div>
  <h1 class="sub-heading">Banker's Algorithm Simulator</h1><br>
  <div>
    <div class="mainbody" id="mainbody">
      <div class="left">
        <div class="input1">
  
         <div class="instances">
          No. of instances of A: &nbsp<input type="text"  id="resourceA" size="2" maxlength="2"/><br><br>
          No. of instances of B: &nbsp<input type="text"  id="resourceB" size="2" maxlength="2"/><br><br>
          No. of instances of C: &nbsp<input type="text"  id="resourceC" size="2" maxlength="2"/><br><br><br>
         </div>
          <div class="buttons1">
            <button type="input" name="sam" id="btn" onclick="sample()">Sample Example</button>&nbsp;&nbsp;
            <button type="input" name="avai" id="btn" onclick="find_avai()">Find available</button><br><br>
            <button type="input" name="need" id="btn" onclick="find_need()">Find need</button>&nbsp;&nbsp;
            <button type="input" name="seq" id="btn" onclick="find_sequence()">Find process sequence</button><br><br>
            <button type="input" name="reset" id="btn" onclick="reset()">Reset</button>
            <button type="input" id="savePDF" style="width: 200px;
                                                      border: 5px black;
                                                      border-radius: 25px;
                                                      margin: 20px;
                                                      height: 35px;
                                                      font-size: 20px;" onclick="savePDF()">Save PDF</button>
          </div>
        </div>
      </div>
      <div class="right">
        <br>
        <div class="tables">
          <center>
            <div class="allocation">
              <table border="2" class="allocation-table">
                <tr>
                  <th colspan="4">Allocation</th>
                </tr>
                <tr>
                  <td></td>
                  <td>A</td>
                  <td>B</td>
                  <td>C</td>
                </tr>
                <tr>
                  <td>P1</td>
                  <td><input id="a11" size="2" maxlength="2"/></td>
                  <td><input id="a12" size="2" maxlength="2"/></td>
                  <td><input id="a13" size="2" maxlength="2"/></td>
                </tr>
                <tr>
                  <td>P2</td>
                  <td><input id="a21" size="2" maxlength="2"/></td>
                  <td><input id="a22" size="2" maxlength="2"/></td>
                  <td><input id="a23" size="2" maxlength="2"/></td>
                </tr>
                <tr>
                  <td>P3</td>
                  <td><input id="a31" size="2" maxlength="2"/></td>
                  <td><input id="a32" size="2" maxlength="2"/></td>
                  <td><input id="a33" size="2" maxlength="2"/></td>
                </tr>
                <tr>
                  <td>P4</td>
                  <td><input id="a41" size="2" maxlength="2"/></td>
                  <td><input id="a42" size="2" maxlength="2"/></td>
                  <td><input id="a43" size="2" maxlength="2"/></td>
                </tr>
                <tr>
                  <td>P5</td>
                  <td><input id="a51" size="2" maxlength="2"/></td>
                  <td><input id="a52" size="2" maxlength="2"/></td>
                  <td><input id="a53" size="2" maxlength="2"/></td>
                </tr>
              </table>
            </div><br>
            <div class="max">
              <table border="2">
                <tr>
                  <th colspan="4">Max</th>
                </tr>
                <tr>
                  <td></td>
                  <td>A</td>
                  <td>B</td>
                  <td>C</td>
                </tr>
                <tr>
                  <td>P1</td>
                  <td><input id="m11" size="2" maxlength="2"/></td>
                  <td><input id="m12" size="2" maxlength="2"/></td>
                  <td><input id="m13" size="2" maxlength="2"/></td>
                </tr>
                <tr>
                  <td>P2</td>
                  <td><input id="m21" size="2" maxlength="2"/></td>
                  <td><input id="m22" size="2" maxlength="2"/></td>
                  <td><input id="m23" size="2" maxlength="2"/></td>
                </tr>
                <tr>
                  <td>P3</td>
                  <td><input id="m31" size="2" maxlength="2"/></td>
                  <td><input id="m32" size="2" maxlength="2"/></td>
                  <td><input id="m33" size="2" maxlength="2"/></td>
                </tr>
                <tr>
                  <td>P4</td>
                  <td><input id="m41" size="2" maxlength="2"/></td>
                  <td><input id="m42" size="2" maxlength="2"/></td>
                  <td><input id="m43" size="2" maxlength="2"/></td>
                </tr>
                <tr>
                  <td>P5</td>
                  <td><input id="m51" size="2" maxlength="2"/></td>
                  <td><input id="m52" size="2" maxlength="2"/></td>
                  <td><input id="m53" size="2" maxlength="2"/></td>
                </tr>
              </table>
            </div>
            <br>
            <div class="need">
              <table border="2">
                <tr>
                  <th colspan="4">Need</th>
                </tr>
                <tr>
                  <td></td>
                  <td>A</td>
                  <td>B</td>
                  <td>C</td>
                </tr>
                <tr>
                  <td>P1</td>
                  <td><input id="n11" size="2" maxlength="2"/></td>
                  <td><input id="n12" size="2" maxlength="2"/></td>
                  <td><input id="n13" size="2" maxlength="2"/></td>
                </tr>
                <tr>
                  <td>P2</td>
                  <td><input id="n21" size="2" maxlength="2"/></td>
                  <td><input id="n22" size="2" maxlength="2"/></td>
                  <td><input id="n23" size="2" maxlength="2"/></td>
                </tr>
                <tr>
                  <td>P3</td>
                  <td><input id="n31" size="2" maxlength="2"/></td>
                  <td><input id="n32" size="2" maxlength="2"/></td>
                  <td><input id="n33" size="2" maxlength="2"/></td>
                </tr>
                <tr>
                  <td>P4</td>
                  <td><input id="n41" size="2" maxlength="2"/></td>
                  <td><input id="n42" size="2" maxlength="2"/></td>
                  <td><input id="n43" size="2" maxlength="2"/></td>
                </tr>
                <tr>
                  <td>P5</td>
                  <td><input id="n51" size="2" maxlength="2"/></td>
                  <td><input id="n52" size="2" maxlength="2"/></td>
                  <td><input id="n53" size="2" maxlength="2"/></td>
                </tr>
              </table>
            </div><br>
          <div class="available">
            <table border="2">
              <tr>
                <th colspan="3">Available</th>
              </tr>
              <tr>
                <td>A</td>
                <td>B</td>
                <td>C</td>
              </tr>
              <tr>
                <td><input id="av11" size="2" maxlength="2"/></td>
                <td><input id="av12" size="2" maxlength="2"/></td>
                <td><input id="av13" size="2" maxlength="2"/></td>
              </tr>
            </table>
          </div>
        </center>
      </div><br>
      <div class="seq">
        <center>
          Process Sequence : &nbsp&nbsp&nbsp
          <input id="p1" size="2" maxlength="2"/>&nbsp&nbsp&nbsp
          <input id="p2" size="2" maxlength="2"/>&nbsp&nbsp&nbsp
          <input id="p3" size="2" maxlength="2"/>&nbsp&nbsp&nbsp
          <input id="p4" size="2" maxlength="2"/>&nbsp&nbsp&nbsp
          <input id="p5" size="2" maxlength="2"/>
        </center>
      </div>
      <div class="comparison">
        <cener>
          <span>Operations:</span>
          <span id="calc0"></span>
          <span id="calc1"></span><br/>
          <span id="calc2"></span><br/>
          <span id="calc3"></span><br/>
          <span id="calc4"></span><br/>
          <span id="calc5"></span>
        </center>
      </div>
    </div>
    <div class="NextPre">
      <button id="pre" class="pre" onclick="pre()"></a>Previous</button>
    </div>
  </div>
<script type="text/javascript">
  // import html2canvas from 'html2canvas';
    document.getElementById("pre").onclick = function () {
      location.href = "process_e.html";
    };

    var doc = new jsPDF();
    function saveDiv(divId, title) {
      doc.fromHTML(`<html><head><title>${title}</title></head><body>` + document.getElementById(divId).innerHTML + `</body></html>`);
      doc.save('div.pdf');
    }

    function printDiv(divId,title) {
      let mywindow = window.open('', 'PRINT', 'height=650,width=900,top=100,left=150');
      
      // Get the input values and update the HTML content
      let inputElements = document.getElementById(divId).querySelectorAll('input, textarea');
        inputElements.forEach((input) => {
        input.setAttribute('value', input.value);
      });

      mywindow.document.write(`<html><head><title>${title}</title>`);
      mywindow.document.write('</head><body >');
      mywindow.document.write(document.getElementById(divId).innerHTML);
      mywindow.document.write('</body></html>');

      mywindow.document.close(); // necessary for IE >= 10
      mywindow.focus(); // necessary for IE >= 10*/

      mywindow.print();
      mywindow.close();

      return true;
    }

    function savePDF(){
      printDiv('mainbody','banker');
    }
    // function saveAsPNG() {
    //   html2canvas(document.body).then(function(canvas) {
    //       document.body.appendChild(canvas);
    //   });
    // const element = document.querySelector('.mainbody');

    // domtoimage.toPng(element, { width: element.scrollWidth, height: element.scrollHeight })
    //     .then(function (dataUrl) {
    //         const img = new Image();
    //         img.src = dataUrl;

    //         const pdfWidth = element.offsetWidth;
    //         const pdfHeight = element.offsetHeight;

    //         const pdf = new jsPDF('p', 'px', [pdfWidth, pdfHeight]);

    //         pdf.addImage(img, 'PNG', 0, 0, pdfWidth, pdfHeight);

    //         // Uncomment the following line if you want to download the PDF
    //         // pdf.save('myDiv.pdf');

    //         // If you want to download the PNG, you can use the following line
    //         const pngData = pdf.output('datauristring');
    //         const a = document.createElement('a');
    //         a.href = pngData;
    //         a.download = 'myDiv.png';
    //         a.click();
    //     })
    //     .catch(function (error) {
    //         console.error('Error capturing content:', error);
    //     });
    //}



</script>
</div>
</body>
</html>